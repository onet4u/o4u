function watermarkImage(n,o){var g=new Image;g.onload=function(){var a=g.height,r=g.width,i=new Image;i.onload=function(){var e=Object.assign(document.createElement("canvas"),{width:r,height:a}),t=e.getContext("2d");t.drawImage(g,0,0),t.drawImage(i,0,0);try{n.src=e.toDataURL("image/png")}catch(e){console.error("Cannot watermark image with text:",{src:n.src,text:o,error:e})}},i.src="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg" height="'+a+'" width="'+r+'"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml"><div style="position: absolute;right: 0;bottom: 0;font-family: BlinkMacSystemFont, -apple-system, Segoe UI, Verdana, sans-seriffont-size: 14px;letter-spacing: 1px;background: #000;color: #fff;padding: 0.25em .5em;border-radius: 0.25em;opacity: 0.6;margin: 0 0.125em 0.125em 0;">'+o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div></div></foreignObject></svg>")},g.src=n.src}
